<link rel="import" href="../bower_components/polymer/polymer.html">
<link rel="import" href="../bower_components/google-map/google-map.html">
<link rel="import" href="../bower_components/iron-ajax/iron-ajax.html">

<dom-module id="ghw-karte">
  <style>
    google-map {
      height: 700px;
    }
  </style>

  <template>
    <iron-ajax
      url="/api/ghwkarte/entries"
      handle-as="json"
      last-response="{{markers}}"
      auto="true"></iron-ajax>

    <google-map api-key="AIzaSyAyWjiioBRRLcrO-hq7Zu1I_VGX3Oxmav0" fit-to-markers="true" language="de">
      <template is="dom-repeat" items="[[markers]]" as="marker">
        <google-map-marker latitude="[[marker.lat]]" longitude="[[marker.lon]]" animation="drop" title="[[marker.name]]">
          [[marker.name]]
        </google-map-marker>
      </template>
    </google-map>
  </template>

  <script>
    Polymer({
      is: 'ghw-karte',
      properties: {
        markers: {
          type: Array,
          value: []
        }
      }
    });
  </script>
</dom-module>
